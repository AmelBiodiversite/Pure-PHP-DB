================================================================
ğŸ” ANALYSE APPROFONDIE MARKETFLOW PRO
================================================================


================================================================
ğŸ“ 1. STRUCTURE DU PROJET
================================================================

ğŸ“¦ Arborescence complÃ¨te :
/home/runner/workspace
â”œâ”€â”€ analyze_marketflow.sh
â”œâ”€â”€ app
â”‚Â Â  â”œâ”€â”€ controllers
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AccountController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AdminController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ApiController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AuthController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ CartController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ExportController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ HomeController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ OrderController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ PaymentController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ProductController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ReviewController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ SellerController.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ StripeController.php
â”‚Â Â  â”‚Â Â  â””â”€â”€ WishlistController.php
â”‚Â Â  â”œâ”€â”€ helpers
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth_helper.php
â”‚Â Â  â”‚Â Â  â””â”€â”€ functions.php
â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Cart.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Order.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Product.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ User.php
â”‚Â Â  â”‚Â Â  â””â”€â”€ Wishlist.php
â”‚Â Â  â””â”€â”€ views
â”‚Â Â      â”œâ”€â”€ account
â”‚Â Â      â”œâ”€â”€ admin
â”‚Â Â      â”œâ”€â”€ auth
â”‚Â Â      â”œâ”€â”€ cart
â”‚Â Â      â”œâ”€â”€ checkout
â”‚Â Â      â”œâ”€â”€ home
â”‚Â Â      â”œâ”€â”€ layouts
â”‚Â Â      â”œâ”€â”€ orders
â”‚Â Â      â”œâ”€â”€ payment
â”‚Â Â      â”œâ”€â”€ products
â”‚Â Â      â”œâ”€â”€ seller
â”‚Â Â      â””â”€â”€ wishlist
â”œâ”€â”€ ARCHITECTURE.md
â”œâ”€â”€ assets
â”‚Â Â  â”œâ”€â”€ css
â”‚Â Â  â”‚Â Â  â””â”€â”€ main.css
â”‚Â Â  â”œâ”€â”€ fonts
â”‚Â Â  â”œâ”€â”€ images
â”‚Â Â  â””â”€â”€ js
â”œâ”€â”€ audit_marketflow_20260123_134429.txt
â”œâ”€â”€ audit_marketflow.sh
â”œâ”€â”€ Changelog.md
â”œâ”€â”€ composer.json
â”œâ”€â”€ composer.lock
â”œâ”€â”€ config
â”‚Â Â  â”œâ”€â”€ config.php
â”‚Â Â  â”œâ”€â”€ currency.php
â”‚Â Â  â””â”€â”€ routes.php
â”œâ”€â”€ CONTRAT_LICENCE_TEMPLATE.md
â”œâ”€â”€ core
â”‚Â Â  â”œâ”€â”€ Controller.php
â”‚Â Â  â”œâ”€â”€ Database.php
â”‚Â Â  â”œâ”€â”€ Model.php
â”‚Â Â  â””â”€â”€ Router.php
â”œâ”€â”€ database
â”‚Â Â  â”œâ”€â”€ fake_products_marketflow.sql
â”‚Â Â  â”œâ”€â”€ marketflow.sql
â”‚Â Â  â”œâ”€â”€ promo_codes.sql
â”‚Â Â  â””â”€â”€ schema.sql
â”œâ”€â”€ fix_cart_validation.php
â”œâ”€â”€ fix_order_item.php
â”œâ”€â”€ includes
â”œâ”€â”€ index.php
â”œâ”€â”€ logs
â”œâ”€â”€ marketflow_analysis_20260123_135546.txt
â”œâ”€â”€ MARKETFLOW_V1_VENTE.zip
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ partials
â”œâ”€â”€ phpinfo.php
â”œâ”€â”€ public
â”‚Â Â  â”œâ”€â”€ css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ notifications.css
â”‚Â Â  â”‚Â Â  â””â”€â”€ style.css
â”‚Â Â  â”œâ”€â”€ js
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app.js
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ notifications.js
â”‚Â Â  â”‚Â Â  â””â”€â”€ wishlist.js
â”‚Â Â  â””â”€â”€ uploads
â”‚Â Â      â”œâ”€â”€ avatars
â”‚Â Â      â”œâ”€â”€ products
â”‚Â Â      â””â”€â”€ shops
â”œâ”€â”€ README.md
â”œâ”€â”€ replit.md
â”œâ”€â”€ replit.nix
â”œâ”€â”€ templates
â”œâ”€â”€ test-db.php
â”œâ”€â”€ test-limits.php
â”œâ”€â”€ test-template.html
â””â”€â”€ tmp
    â””â”€â”€ sessions

39 directories, 60 files

ğŸ“Š Statistiques par dossier :

ğŸ“‚ app/ :
  - Fichiers : 53
  - Taille : 704K

ğŸ“‚ public/ :
  - Fichiers : 39
  - Taille : 26M

ğŸ“‚ config/ :
  - Fichiers : 3
  - Taille : 16K

ğŸ“‚ database/ :
  - Fichiers : 4
  - Taille : 72K

ğŸ“‚ logs/ :
  - Fichiers : 0
  - Taille : 0

================================================================
ğŸ—ï¸ 2. ARCHITECTURE MVC
================================================================

ğŸ“‹ CONTRÃ”LEURS (app/controllers/) :

  ğŸ“„ AccountController.php
    - Lignes : 78
    - MÃ©thodes publiques :
      â†’ index() [ligne 11]
      â†’ downloads() [ligne 57]
    - DÃ©pendances : 1

  ğŸ“„ AdminController.php
    - Lignes : 250
    - MÃ©thodes publiques :
      â†’ __construct() [ligne 17]
      â†’ index() [ligne 25]
      â†’ users() [ligne 74]
      â†’ products() [ligne 98]
      â†’ approveProduct() [ligne 131]
      â†’ rejectProduct() [ligne 145]
      â†’ suspendUser() [ligne 164]
      â†’ activateUser() [ligne 178]
      â†’ deleteUser() [ligne 192]
      â†’ stats() [ligne 216]
    - DÃ©pendances : 4

  ğŸ“„ ApiController.php
    - Lignes : 121
    - MÃ©thodes publiques :
      â†’ products() [ligne 13]
      â†’ product() [ligne 42]
      â†’ categories() [ligne 64]
      â†’ index() [ligne 86]
    - DÃ©pendances : 2

  ğŸ“„ AuthController.php
    - Lignes : 233
    - MÃ©thodes publiques :
      â†’ __construct() [ligne 16]
      â†’ login() [ligne 29]
      â†’ register() [ligne 90]
      â†’ logout() [ligne 200]
    - DÃ©pendances : 2

  ğŸ“„ CartController.php
    - Lignes : 338
    - MÃ©thodes publiques :
      â†’ __construct() [ligne 17]
      â†’ index() [ligne 25]
      â†’ add() [ligne 40]
      â†’ remove() [ligne 81]
      â†’ update() [ligne 108]
      â†’ clear() [ligne 136]
      â†’ applyPromo() [ligne 153]
      â†’ removePromo() [ligne 176]
      â†’ checkout() [ligne 184]
      â†’ processCheckout() [ligne 225]
      â†’ getCart() [ligne 320]
    - DÃ©pendances : 3

  ğŸ“„ ExportController.php
    - Lignes : 93
    - MÃ©thodes publiques :
      â†’ users() [ligne 11]
      â†’ products() [ligne 29]
      â†’ orders() [ligne 51]
    - DÃ©pendances : 1

  ğŸ“„ HomeController.php
    - Lignes : 242
    - MÃ©thodes publiques :
      â†’ index() [ligne 53]
      â†’ about() [ligne 86]
      â†’ contact() [ligne 103]
      â†’ contactSubmit() [ligne 128]
      â†’ sellers() [ligne 185]
      â†’ terms() [ligne 202]
      â†’ privacy() [ligne 219]
      â†’ help() [ligne 237]
    - DÃ©pendances : 3

  ğŸ“„ OrderController.php
    - Lignes : 532
    - MÃ©thodes publiques :
      â†’ __construct() [ligne 16]
      â†’ index() [ligne 26]
      â†’ show() [ligne 88]
      â†’ download() [ligne 109]
      â†’ requestRefund() [ligne 205]
      â†’ submitReview() [ligne 296]
      â†’ downloadInvoice() [ligne 391]
    - DÃ©pendances : 2

  ğŸ“„ PaymentController.php
    - Lignes : 422
    - MÃ©thodes publiques :
      â†’ __construct() [ligne 18]
      â†’ success() [ligne 31]
      â†’ cancel() [ligne 104]
      â†’ stripeWebhook() [ligne 113]
      â†’ createPaymentIntent() [ligne 269]
      â†’ checkPaymentStatus() [ligne 310]
      â†’ refund() [ligne 338]
    - DÃ©pendances : 3

  ğŸ“„ ProductController.php
    - Lignes : 429
    - MÃ©thodes publiques :
      â†’ __construct() [ligne 16]
      â†’ index() [ligne 24]
      â†’ show() [ligne 91]
      â†’ search() [ligne 223]
      â†’ toggleWishlist() [ligne 256]
      â†’ searchSuggestions() [ligne 327]
      â†’ sellerProducts() [ligne 362]
      â†’ categories() [ligne 385]
      â†’ category() [ligne 403]
    - DÃ©pendances : 2

  ğŸ“„ ReviewController.php
    - Lignes : 225
    - MÃ©thodes publiques :
      â†’ create() [ligne 23]
      â†’ delete() [ligne 139]
      â†’ moderate() [ligne 179]
      â†’ approve() [ligne 201]
      â†’ reject() [ligne 215]
    - DÃ©pendances : 1

  ğŸ“„ SellerController.php
    - Lignes : 560
    - MÃ©thodes publiques :
      â†’ __construct() [ligne 23]
      â†’ dashboard() [ligne 35]
      â†’ products() [ligne 153]
      â†’ createProduct() [ligne 166]
      â†’ storeProduct() [ligne 182]
      â†’ editProduct() [ligne 260]
      â†’ updateProduct() [ligne 299]
      â†’ deleteProduct() [ligne 339]
      â†’ sales() [ligne 356]
      â†’ earnings() [ligne 382]
      â†’ requestPayout() [ligne 436]
      â†’ analytics() [ligne 482]
    - DÃ©pendances : 3

  ğŸ“„ StripeController.php
    - Lignes : 141
    - MÃ©thodes publiques :
      â†’ createCheckoutSession() [ligne 13]
      â†’ success() [ligne 134]
    - DÃ©pendances : 3

  ğŸ“„ WishlistController.php
    - Lignes : 131
    - MÃ©thodes publiques :
      â†’ __construct() [ligne 16]
      â†’ index() [ligne 25]
      â†’ add() [ligne 44]
      â†’ remove() [ligne 82]
      â†’ count() [ligne 120]
    - DÃ©pendances : 3

ğŸ“‹ MODÃˆLES (app/models/) :

  ğŸ“„ Cart.php
    - Lignes : 359
    - PropriÃ©tÃ©s :
      â†’ private $sessionKey = 'cart';
    - MÃ©thodes publiques :
      â†’ __construct() [ligne 15]
      â†’ add() [ligne 33]
      â†’ remove() [ligne 78]
      â†’ updateQuantity() [ligne 96]
      â†’ clear() [ligne 117]
      â†’ get() [ligne 130]
      â†’ count() [ligne 137]
      â†’ total() [ligne 144]
      â†’ isEmpty() [ligne 151]
      â†’ has() [ligne 158]

  ğŸ“„ Order.php
    - Lignes : 460
    - PropriÃ©tÃ©s :
      â†’ protected $table = 'orders';
      â†’ protected $primaryKey = 'id';
    - MÃ©thodes publiques :
      â†’ createOrder() [ligne 21]
      â†’ createOrderWithItems() [ligne 47]
      â†’ findByOrderNumber() [ligne 118]
      â†’ getOrderItems() [ligne 135]
      â†’ getBuyerOrders() [ligne 156]
      â†’ getSellerSales() [ligne 191]
      â†’ markAsPaid() [ligne 227]
      â†’ incrementDownloadCount() [ligne 245]
      â†’ canDownload() [ligne 258]
      â†’ getOrderStats() [ligne 308]

  ğŸ“„ Product.php
    - Lignes : 493
    - PropriÃ©tÃ©s :
      â†’ protected $table = 'products';
      â†’ protected $primaryKey = 'id';
    - MÃ©thodes publiques :
      â†’ createProduct() [ligne 28]
      â†’ getSellerProducts() [ligne 229]
      â†’ getProductWithSeller() [ligne 251]
      â†’ getProductBySlug() [ligne 273]
      â†’ getProducts() [ligne 308]
      â†’ updateProduct() [ligne 424]
      â†’ deleteProduct() [ligne 459]
      â†’ getPopular() [ligne 475]

  ğŸ“„ User.php
    - Lignes : 362
    - PropriÃ©tÃ©s :
      â†’ protected $table = 'users';
      â†’ protected $primaryKey = 'id';
    - MÃ©thodes publiques :
      â†’ createUser() [ligne 19]
      â†’ authenticate() [ligne 56]
      â†’ login() [ligne 79]
      â†’ emailExists() [ligne 86]
      â†’ usernameExists() [ligne 105]
      â†’ findByEmail() [ligne 124]
      â†’ findByUsername() [ligne 134]
      â†’ findByShopSlug() [ligne 144]
      â†’ changePassword() [ligne 154]
      â†’ updateProfile() [ligne 162]

  ğŸ“„ Wishlist.php
    - Lignes : 410
    - PropriÃ©tÃ©s :
      â†’ private $db;
    - MÃ©thodes publiques :
      â†’ __construct() [ligne 49]
      â†’ add() [ligne 71]
      â†’ remove() [ligne 114]
      â†’ exists() [ligne 150]
      â†’ getUserWishlist() [ligne 209]
      â†’ getCount() [ligne 272]
      â†’ clearUserWishlist() [ligne 306]
      â†’ getUserWishlistIds() [ligne 338]
      â†’ getProductWishlistCount() [ligne 370]

ğŸ“‹ VUES (app/views/) :
  Nombre total de fichiers vues :
    â†’ 32

  Organisation par dossier :
    â†’ account/ : 2 fichiers
    â†’ admin/ : 3 fichiers
    â†’ auth/ : 2 fichiers
    â†’ cart/ : 2 fichiers
    â†’ checkout/ : 1 fichiers
    â†’ home/ : 6 fichiers
    â†’ layouts/ : 2 fichiers
    â†’ orders/ : 2 fichiers
    â†’ payment/ : 2 fichiers
    â†’ products/ : 5 fichiers
    â†’ seller/ : 4 fichiers
    â†’ wishlist/ : 1 fichiers

================================================================
ğŸ—„ï¸ 3. SCHÃ‰MA DE BASE DE DONNÃ‰ES
================================================================

ğŸ“Š Analyse des migrations SQL :

  ğŸ“„ fake_products_marketflow.sql
    Tables crÃ©Ã©es :

  ğŸ“„ marketflow.sql
    Tables crÃ©Ã©es :
      â†’ users
        - full_name VARCHAR(255) NOT NULL
        - username VARCHAR(100) NOT NULL UNIQUE
        - email VARCHAR(255) NOT NULL UNIQUE
        - password VARCHAR(255) NOT NULL
        - role VARCHAR(20) NOT NULL DEFAULT 'buyer'
      â†’ categories
        - name VARCHAR(100) NOT NULL
        - slug VARCHAR(100) NOT NULL UNIQUE
        - description TEXT
        - icon VARCHAR(50)
        - parent_id INTEGER REFERENCES categories(id) ON DELETE SET NULL
      â†’ products
        - seller_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE
        - category_id INTEGER REFERENCES categories(id) ON DELETE SET NULL
        - title VARCHAR(255) NOT NULL
        - slug VARCHAR(255) NOT NULL UNIQUE
        - description TEXT NOT NULL
      â†’ tags
        - name VARCHAR(50) NOT NULL UNIQUE
        - slug VARCHAR(50) NOT NULL UNIQUE
        - usage_count INTEGER DEFAULT 0
        - created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE CASCADE
      â†’ product_tags
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE CASCADE
        - tag_id INTEGER NOT NULL REFERENCES tags(id) ON DELETE CASCADE
        - created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        - UNIQUE(product_id, tag_id)
      â†’ product_gallery
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE CASCADE
        - image_url VARCHAR(500) NOT NULL
        - display_order INTEGER DEFAULT 0
        - created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
      â†’ promo_codes
        - code VARCHAR(50) NOT NULL UNIQUE
        - type VARCHAR(20) NOT NULL DEFAULT 'percentage'
        - value DECIMAL(10,2) NOT NULL
        - min_purchase DECIMAL(10,2) DEFAULT 0.00
        - max_uses INTEGER
      â†’ orders
        - order_number VARCHAR(50) NOT NULL UNIQUE
        - buyer_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE
        - subtotal DECIMAL(10,2) NOT NULL
        - discount DECIMAL(10,2) DEFAULT 0.00
        - total_amount DECIMAL(10,2) NOT NULL
      â†’ order_items
        - order_id INTEGER NOT NULL REFERENCES orders(id) ON DELETE CASCADE
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE RESTRICT
        - seller_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE
        - product_title VARCHAR(255) NOT NULL
        - product_price DECIMAL(10,2) NOT NULL
      â†’ reviews
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE CASCADE
        - buyer_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE
        - order_item_id INTEGER REFERENCES order_items(id) ON DELETE SET NULL
        - rating INTEGER NOT NULL
        - title VARCHAR(255)
      â†’ wishlist
        - user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE CASCADE
        - created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        - UNIQUE(user_id, product_id)
      â†’ activity_logs
        - user_id INTEGER REFERENCES users(id) ON DELETE CASCADE
        - action VARCHAR(100) NOT NULL
        - entity_type VARCHAR(50)
        - entity_id INTEGER
        - ip_address INET

  ğŸ“„ promo_codes.sql
    Tables crÃ©Ã©es :
      â†’ promo_codes
        - code VARCHAR(50) UNIQUE NOT NULL
        - discount_type VARCHAR(20) NOT NULL CHECK (discount_type IN ('percentage', 'fixed'))
        - discount_value DECIMAL(10, 2) NOT NULL
        - min_amount DECIMAL(10, 2) DEFAULT 0
        - usage_limit INTEGER

  ğŸ“„ schema.sql
    Tables crÃ©Ã©es :
      â†’ users
        - full_name VARCHAR(255) NOT NULL
        - username VARCHAR(100) NOT NULL UNIQUE
        - email VARCHAR(255) NOT NULL UNIQUE
        - password VARCHAR(255) NOT NULL
        - role VARCHAR(20) NOT NULL DEFAULT 'buyer'
      â†’ categories
        - name VARCHAR(100) NOT NULL
        - slug VARCHAR(100) NOT NULL UNIQUE
        - description TEXT
        - icon VARCHAR(50)
        - parent_id INTEGER REFERENCES categories(id) ON DELETE SET NULL
      â†’ products
        - seller_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE
        - category_id INTEGER REFERENCES categories(id) ON DELETE SET NULL
        - title VARCHAR(255) NOT NULL
        - slug VARCHAR(255) NOT NULL UNIQUE
        - description TEXT NOT NULL
      â†’ tags
        - name VARCHAR(50) NOT NULL UNIQUE
        - slug VARCHAR(50) NOT NULL UNIQUE
        - usage_count INTEGER DEFAULT 0
        - created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE CASCADE
      â†’ product_tags
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE CASCADE
        - tag_id INTEGER NOT NULL REFERENCES tags(id) ON DELETE CASCADE
        - created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        - UNIQUE(product_id, tag_id)
      â†’ product_gallery
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE CASCADE
        - image_url VARCHAR(500) NOT NULL
        - display_order INTEGER DEFAULT 0
        - created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
      â†’ promo_codes
        - code VARCHAR(50) NOT NULL UNIQUE
        - type VARCHAR(20) NOT NULL DEFAULT 'percentage'
        - value DECIMAL(10,2) NOT NULL
        - min_purchase DECIMAL(10,2) DEFAULT 0.00
        - max_uses INTEGER
      â†’ orders
        - order_number VARCHAR(50) NOT NULL UNIQUE
        - buyer_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE
        - subtotal DECIMAL(10,2) NOT NULL
        - discount DECIMAL(10,2) DEFAULT 0.00
        - total_amount DECIMAL(10,2) NOT NULL
      â†’ order_items
        - order_id INTEGER NOT NULL REFERENCES orders(id) ON DELETE CASCADE
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE RESTRICT
        - seller_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE
        - product_title VARCHAR(255) NOT NULL
        - product_price DECIMAL(10,2) NOT NULL
      â†’ reviews
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE CASCADE
        - buyer_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE
        - order_item_id INTEGER REFERENCES order_items(id) ON DELETE SET NULL
        - rating INTEGER NOT NULL
        - title VARCHAR(255)
      â†’ wishlist
        - user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE
        - product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE CASCADE
        - created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        - UNIQUE(user_id, product_id)
      â†’ activity_logs
        - user_id INTEGER REFERENCES users(id) ON DELETE CASCADE
        - action VARCHAR(100) NOT NULL
        - entity_type VARCHAR(50)
        - entity_id INTEGER
        - ip_address INET

ğŸ“‹ Tables identifiÃ©es dans le code :
  â†’ activity_logs
  â†’ categories
  â†’ order_items
  â†’ orders
  â†’ product_gallery
  â†’ products
  â†’ product_tags
  â†’ promo_codes
  â†’ refund_requests
  â†’ reviews
  â†’ seller_payouts
  â†’ seller_profiles
  â†’ tags
  â†’ users
  â†’ wishlist

================================================================
ğŸ›£ï¸ 4. ROUTES & ENDPOINTS
================================================================


ğŸ“‹ Endpoints API dÃ©tectÃ©s :
  â†’ WishlistController.php
  â†’ products.php
  â†’ index.php
  â†’ index.php
  â†’ show.php

================================================================
ğŸ”Œ 5. INTÃ‰GRATIONS EXTERNES
================================================================

ğŸ’³ STRIPE :
  - Fichiers utilisant Stripe : 12
  - Endpoints Stripe :
    â†’ createCheckoutSession()
    â†’ success()

ğŸ“§ EMAIL :
  - RÃ©fÃ©rences email dans le code : 4

ğŸ“¦ COMPOSER :
  - DÃ©pendances :
    "stripe/stripe-php": "^19.2"

================================================================
âš™ï¸ 6. CONFIGURATION
================================================================

ğŸ“„ config/config.php :

  Constantes dÃ©finies :
    define('DATABASE_URL', getenv('DATABASE_URL'));
    define('APP_URL', 'https://' . ($_SERVER['HTTP_HOST'] ?? 'localhost'));
    define('CSS_URL', APP_URL . '/public/css');
    define('JS_URL', APP_URL . '/public/js');
    define('IMG_URL', APP_URL . '/public/img');
    define('UPLOAD_URL', APP_URL . '/public/uploads');
    if (!defined('APP_CURRENCY')) define('APP_CURRENCY', 'â‚¬');
    if (!defined('APP_CURRENCY_POS')) define('APP_CURRENCY_POS', 'right');
    if (!defined('CURRENCY')) define('CURRENCY', APP_CURRENCY);
    define('STRIPE_PUBLIC_KEY', getenv('STRIPE_PUBLIC_KEY') ?: 'pk_test_51Ry71xRNkjwOv11X1xlyYOwgZI0823L8X9vb0G4PKPe7XsodDAUQW056o8Mvlxp0ghi8b2F7z6L8nSh5PWX2essG00SKvsHxNN');
    define('STRIPE_SECRET_KEY', getenv('STRIPE_SECRET_KEY') ?: 'sk_test_51Ry71xRNkjwOv11X1cF3hlUVglXKjnGf0xPCXxqwQGLLtUTDJWJqfXzeQqvmVfz4rb2WQFMRqPWbot6YwLxZ8GJy00Mig0enav');
    define('STRIPE_WEBHOOK_SECRET', getenv('STRIPE_WEBHOOK_SECRET') ?: 'whsec_votre_webhook_secret');
    define('MAIL_FROM', 'noreply@marketflowpro.com');
    define('MAX_FILE_SIZE', 5 analyze_marketflow.sh app ARCHITECTURE.md assets audit_marketflow_20260123_134429.txt audit_marketflow.sh Changelog.md composer.json composer.lock config CONTRAT_LICENCE_TEMPLATE.md core database fix_cart_validation.php fix_order_item.php includes index.php logs marketflow_analysis_20260123_135546.txt MARKETFLOW_V1_VENTE.zip node_modules package.json package-lock.json partials phpinfo.php public README.md replit.md replit.nix templates test-db.php test-limits.php test-template.html tmp vendor 1024 analyze_marketflow.sh app ARCHITECTURE.md assets audit_marketflow_20260123_134429.txt audit_marketflow.sh Changelog.md composer.json composer.lock config CONTRAT_LICENCE_TEMPLATE.md core database fix_cart_validation.php fix_order_item.php includes index.php logs marketflow_analysis_20260123_135546.txt MARKETFLOW_V1_VENTE.zip node_modules package.json package-lock.json partials phpinfo.php public README.md replit.md replit.nix templates test-db.php test-limits.php test-template.html tmp vendor 1024); // 5 MB
    define('ALLOWED_EXTENSIONS', ['jpg', 'jpeg', 'png', 'gif', 'pdf', 'zip']);
    define('PLATFORM_COMMISSION', 10); // 10% de commission

ğŸ”’ .env dÃ©tectÃ© :
  - Variables d'environnement configurÃ©es
    â†’ DATABASE_URL
    â†’ STRIPE_PUBLIC_KEY
    â†’ STRIPE_SECRET_KEY
    â†’ STRIPE_WEBHOOK_SECRET
    â†’ APP_ENV
    â†’ APP_DEBUG

================================================================
ğŸ’ 7. PATTERNS & BONNES PRATIQUES
================================================================

ğŸ”’ SÃ‰CURITÃ‰ :
  - RequÃªtes prÃ©parÃ©es (PDO) : 236 occurrences
  - Protection XSS : 39 occurrences
  - Protection CSRF : 49 occurrences
  - Hachage mots de passe : 3 occurrences

ğŸ—ï¸ ARCHITECTURE :
  - Classes dÃ©finies : 19
  - Interfaces : 0
  - Traits : 0

ğŸ“ DOCUMENTATION :
  - Commentaires doc : 229
  - TODO/FIXME : 6

================================================================
ğŸ¯ 8. FONCTIONNALITÃ‰S MÃ‰TIER
================================================================

ğŸ“¦ PRODUITS :
  MÃ©thodes ProductController :
    â†’ __construct()
    â†’ index()
    â†’ show()
    â†’ search()
    â†’ toggleWishlist()
    â†’ searchSuggestions()
    â†’ sellerProducts()
    â†’ categories()
    â†’ category()

ğŸ›’ PANIER & COMMANDES :
  â†’ OrderController.php
  â†’ CartController.php
  â†’ Order.php
  â†’ Cart.php

ğŸ‘¤ UTILISATEURS :
  MÃ©thodes AuthController :
    â†’ __construct()
    â†’ login()
    â†’ register()
    â†’ logout()

â­ REVIEWS :
  ReviewController dÃ©tectÃ©

â¤ï¸ WISHLIST :
  - RÃ©fÃ©rences wishlist : 124

================================================================
ğŸ¨ 9. ASSETS & FRONTEND
================================================================

ğŸ“Š Fichiers public/ :
  - JavaScript : 3 fichiers
  - CSS : 2 fichiers
  - Images : 16 fichiers

ğŸ¨ Tailwind CSS dÃ©tectÃ© : 49 rÃ©fÃ©rences
ğŸ“Š Chart.js dÃ©tectÃ© : 5 rÃ©fÃ©rences

================================================================
ğŸ“Š 10. STATISTIQUES GLOBALES
================================================================

ğŸ“„ Fichiers PHP : 53
ğŸ“ Lignes de code PHP : 15479
ğŸ’¾ Taille totale projet : 418M

ğŸ¯ Score de complexitÃ© estimÃ© :
  â†’ 530 points (basÃ© sur nombre de fichiers)

================================================================
âœ… ANALYSE TERMINÃ‰E
================================================================

ğŸ“„ Rapport complet gÃ©nÃ©rÃ© : marketflow_analysis_20260123_135546.txt
â° Date : 2026-01-23 13:55:57

